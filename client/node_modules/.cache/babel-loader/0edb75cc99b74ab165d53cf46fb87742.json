{"ast":null,"code":"import _classCallCheck from \"/home/jappe/devpot/workspace/school/react-pwa/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jappe/devpot/workspace/school/react-pwa/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jappe/devpot/workspace/school/react-pwa/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jappe/devpot/workspace/school/react-pwa/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jappe/devpot/workspace/school/react-pwa/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/jappe/devpot/workspace/school/react-pwa/client/src/Routes.jsx\";\nimport React from 'react';\nimport { Router, Route, Redirect } from 'react-router-dom';\nimport Home from './Pages/Index';\nimport Profile from './Pages/Profile';\nimport Callback from './Pages/Callback';\nimport Navigation from './Layout/Navigation';\nimport Auth from './Auth';\nimport history from './history';\nvar auth = new Auth();\n\nvar handleAuthentication = function handleAuthentication(_ref) {\n  var location = _ref.location;\n\n  if (/access_token|id_token|error/.test(location.hash)) {\n    auth.handleAuthentication();\n  }\n};\n\nvar Routes =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Routes, _React$Component);\n\n  function Routes() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Routes);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Routes)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      profile: {}\n    };\n    return _this;\n  }\n\n  _createClass(Routes, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var userProfile = auth.userProfile,\n          getProfile = auth.getProfile;\n\n      if (!userProfile) {\n        try {\n          getProfile(function (err, profile) {\n            _this2.setState({\n              profile: profile\n            });\n          });\n        } catch (e) {}\n      } else {\n        this.setState({\n          profile: userProfile\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Router, {\n        history: history,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text-black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(Navigation, {\n        auth: auth,\n        profile: this.state.profile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }), React.createElement(\"main\", {\n        className: \"min-h-screen pt-16 bg-grey-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render(props) {\n          return React.createElement(Home, Object.assign({\n            auth: auth\n          }, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 48\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/profile\",\n        render: function render(props) {\n          return !auth.isAuthenticated() ? React.createElement(Redirect, {\n            to: \"/home\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 55\n            },\n            __self: this\n          }) : React.createElement(Profile, Object.assign({\n            auth: auth\n          }, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/callback\",\n        render: function render(props) {\n          handleAuthentication(props);\n          return React.createElement(Callback, Object.assign({}, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Routes;\n}(React.Component);\n\nexport { Routes as default };","map":{"version":3,"sources":["/home/jappe/devpot/workspace/school/react-pwa/client/src/Routes.jsx"],"names":["React","Router","Route","Redirect","Home","Profile","Callback","Navigation","Auth","history","auth","handleAuthentication","location","test","hash","Routes","state","profile","userProfile","getProfile","err","setState","e","props","isAuthenticated","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Router, Route, Redirect } from 'react-router-dom'\nimport Home from './Pages/Index'\nimport Profile from './Pages/Profile'\nimport Callback from './Pages/Callback'\nimport Navigation from './Layout/Navigation'\nimport Auth from './Auth'\nimport history from './history'\n\nconst auth = new Auth()\n\nconst handleAuthentication = ({ location }) => {\n  if (/access_token|id_token|error/.test(location.hash)) {\n    auth.handleAuthentication()\n  }\n}\n\nexport default class Routes extends React.Component {\n  state = {\n    profile: {}\n  }\n\n  componentWillMount() {\n    const { userProfile, getProfile } = auth\n\n    if (!userProfile) {\n      try {\n        getProfile((err, profile) => {\n          this.setState({ profile })\n        })\n      } catch (e) {}\n    } else {\n      this.setState({ profile: userProfile })\n    }\n  }\n\n  render () {\n    return (\n      <Router history={history}>\n        <div className=\"text-black\">\n          <Navigation auth={auth} profile={this.state.profile} />\n\n          <main className=\"min-h-screen pt-16 bg-grey-light\">\n            <Route\n              exact\n              path=\"/\"\n              render={props =>\n                <Home auth={auth} {...props} />\n              }\n            />\n            <Route\n              path=\"/profile\"\n              render={props =>\n                !auth.isAuthenticated()\n                  ? <Redirect to=\"/home\" />\n                  : <Profile auth={auth} {...props} />}\n            />\n            <Route\n              path=\"/callback\"\n              render={props => {\n                handleAuthentication(props);\n                return <Callback {...props} />;\n              }}\n            />\n          </main>\n        </div>\n      </Router>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}